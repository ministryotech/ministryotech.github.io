"use strict";function addLoadEvent(e){var o=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){o&&o(),e()}}function Menu(){this.$selector="#js-nav",this.$buttonSelector=".menu-button",this.barsClass="fa-bars",this.closeClass="fa-times";var e=this;this.isActive=function(){return"none"!=$(e.$buttonSelector).css("display")},this.isOpen=function(){return $(e.$buttonSelector).hasClass(e.closeClass)},this.setOpenState=function(o){o?$(e.$selector).show():$(e.$selector).show("slow"),$(e.$buttonSelector).removeClass(e.barsClass),$(e.$buttonSelector).addClass(e.closeClass)},this.setClosedState=function(o){o?$(e.$selector).hide():$(e.$selector).hide("slow"),$(e.$buttonSelector).removeClass(e.closeClass),$(e.$buttonSelector).addClass(e.barsClass)},this.toggle=function(){e.isActive()&&(e.isOpen()?e.setClosedState():e.setOpenState())},$(this.$buttonSelector).on("click",function(){e.toggle()}),$(".mobile-fold").on("click",function(){e.toggle()}),$(".page-title-or-logo").on("click",function(){e.toggle()}),$(window).on("resize",function(){setTimeout(function(){var o=Math.max(document.documentElement.clientWidth,window.innerWidth||0);o>=MINISTRY.UI.wideBreakpoint?$(e.$selector).show():e.isActive()&&e.setClosedState(!0)},50)})}function Blog(e){if("standard"!=e&&"dev"!=e)throw new Error("Invalid blog type = Please specify either standard or dev.");this.$selectors={currentPage:"#js-current-page",totalPages:"#js-total-pages",articleWrapper:"#js-blog-articles",footerToken:"#js-blog-footer",loadingArticles:"#js-blog-loading",showMore:"#js-show-more"},this.templates={loading:'<i class="blog__loading__icon fa fa-file-text"></i>Loading articles',showMore:'<i class="blog__show-more__icon fa fa-caret-square-o-down"></i><span class="blog__show-more__text">Show more</span>'},this.type=e,this.apiRoot=getCurrentProtocol()+"//"+getCurrentHost()+"/umbraco/api/"+("dev"==this.type?"devblogroll":"blogroll")+"/",this.currentlyLoading=!1;var o=this;this.totalPages=function(e){return void 0===e||null===e?parseInt($(o.$selectors.totalPages).text()):($(o.$selectors.totalPages).text(e),e)},this.lastLoadedPage=function(e){return void 0===e||null===e?parseInt($(o.$selectors.currentPage).text()):($(o.$selectors.currentPage).text(e),e)},this.loadNextSummaryPage=function(){o.currentlyLoading=!0,$(o.$selectors.footerToken).remove(),$(o.$selectors.showMore).remove(),$(o.$selectors.articleWrapper).append('<div id="js-blog-loading" class="blog__loading">'+o.templates.loading+"</div>");var e=o.lastLoadedPage()+1;$.ajax({url:o.apiRoot+"articlesummaries?page="+e,type:"GET",contentType:"application/json; charset=utf-8",success:function(e){$(o.$selectors.loadingArticles).remove(),o.lastLoadedPage(e.CurrentPage),o.totalPages(e.TotalPages),e.Items.forEach(function(e){$(o.$selectors.articleWrapper).append(e.Html)}),o.lastLoadedPage()<o.totalPages()&&($(o.$selectors.articleWrapper).append('<div id="js-show-more" class="blog__show-more">'+o.templates.showMore+"</div>"),$(o.$selectors.articleWrapper).append('<span id="js-blog-footer"></span>')),o.currentlyLoading=!1},error:function(t){window.handleAjaxError(t,"Could not load blog article summaries for page "+e),o.currentlyLoading=!1}})};var t=function(){o.currentlyLoading||o.loadNextSummaryPage()};this.lastLoadedPage()<this.totalPages()&&$(this.$selectors.articleWrapper).append('<div id="js-show-more" class="blog__show-more">'+this.templates.showMore+"</div>"),$(window).on("scroll",function(){!o.currentlyLoading&&elementInCurrentViewport($(o.$selectors.footerToken))&&t()}),$(o.$selectors.showMore).on("click",t)}window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){var e,o=arguments;o.callee=o.callee.caller,e=[].slice.call(o),"object"==typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e)}},function(e){function o(){}for(var t,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");t=n.pop();)e[t]=e[t]||o}(function(){try{return console.log(),window.console}catch(e){return window.console={}}}()),window.handleAjaxError=function(e,o){if(void 0!==e&&null!==e){if(0!==e.status)try{var t=JSON.parse(e.responseText);void 0!==t&&null!==t&&null!==t.Message?log(o+": "+t.Message):log(o+": Status - "+e.status)}catch(n){log(o+": Status - "+e.status)}}else log(o+".")},window.goToUrl=function(e){location.href=e},window.getCurrentProtocol=function(){return location.protocol},window.getCurrentHost=function(){return location.host},window.isTouchDevice=function(){return"ontouchstart"in window},window.elementInCurrentViewport=function(e){var o=$(window).scrollTop(),t=o+$(window).height();if($(e).length<1)return!1;var n=$(e).offset().top,s=n+$(e).height();return s<=t&&n>=o};var MINISTRY=MINISTRY||{};MINISTRY.UI={midBreakpoint:640,wideBreakpoint:984,$linkButtons:null,$codeElements:null,bindCodeElements:function(){MINISTRY.UI.$codeElements=$("pre"),MINISTRY.UI.$codeElements.each(function(){$(this).on("click",function(){var e;document.selection?(e=document.body.createTextRange(),e.moveToElementText(this),e.select()):window.getSelection&&(e=document.createRange(),e.selectNode(this),window.getSelection().addRange(e))})})},bindLinkButtons:function(){MINISTRY.UI.$linkButtons=$(".link-button"),MINISTRY.UI.$linkButtons.each(function(){$(this).on("click",function(){var e=$(this).find("a").attr("href");goToUrl(e)})})},bindTouchRestrictedElements:function(){var e=$(".touch-only"),o=$(".non-touch");isTouchDevice()?(o.height(0),o.hide(),e.show()):(o.show(),e.hide(),e.height(0))},init:function(){MINISTRY.UI.bindTouchRestrictedElements(),MINISTRY.UI.bindLinkButtons(),MINISTRY.UI.bindCodeElements()}},addLoadEvent(function(){MINISTRY.UI.init()}),addLoadEvent(function(){MINISTRY.UI.menu=new Menu}),MINISTRY.UI.bindBlog=function(){MINISTRY.Blog=void 0,MINISTRY.DevBlog=void 0,$(".blog-std").length>0&&(MINISTRY.Blog=new Blog("standard")),$(".blog-dev").length>0&&(MINISTRY.DevBlog=new Blog("dev"))},addLoadEvent(function(){MINISTRY.UI.bindBlog()});var disqus_shortname="ministryotech";!function(){if(void 0!=document.getElementById("disqus_thread")){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}}();